import{f as u}from"./fetch-hDQBONsW.js";const l=document.querySelector("#register_button");l&&l.addEventListener("click",async t=>{t.preventDefault(),console.log("Nyt luodaan käyttäjä");const n="https://hyte-server-suvta.northeurope.cloudapp.azure.com/api/users",o=document.querySelector("#register_form"),r={username:o.querySelector("input[name=username]").value,password:o.querySelector("input[name=password]").value,email:o.querySelector("input[name=email]").value},e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};try{u(n,e).then(s=>{console.log(s)})}catch(s){console.log(s)}});const c=document.querySelector("#login_button");c&&c.addEventListener("click",async t=>{t.preventDefault(),console.log("Nyt logataan sisään");const n="https://hyte-server-suvta.northeurope.cloudapp.azure.com/api/auth/login",o=document.querySelector("#login_form"),a={username:o.querySelector("input[name=username]").value,password:o.querySelector("input[name=password]").value},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};u(n,r).then(e=>{console.log(e),console.log(e.token),localStorage.setItem("token",e.token),e.token===void 0?alert("Username or password is incorrect"):(alert(e.message),location.href="app.html",localStorage.setItem("name",e.user.username),localStorage.setItem("user_id",e.user.user_id)),logResponse("loginResponse",`Localstorage set with token value: ${e.token}`)})});
