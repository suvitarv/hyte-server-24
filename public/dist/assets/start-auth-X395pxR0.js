import{f as c}from"./fetch-hDQBONsW.js";const u=document.querySelector("#register_button");u&&u.addEventListener("click",async n=>{n.preventDefault(),console.log("Nyt luodaan käyttäjä");const o="https://hyte-server-suvta.northeurope.cloudapp.azure.com/api/users",t=document.querySelector("#register_form"),s={username:t.querySelector("input[name=username]").value,password:t.querySelector("input[name=password]").value,email:t.querySelector("input[name=email]").value},e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};try{c(o,e).then(a=>{console.log(a)})}catch(a){console.log(a)}});const i=document.querySelector("#login_button");i&&i.addEventListener("click",async n=>{n.preventDefault(),console.log("Nyt logataan sisään");const o="https://hyte-server-suvta.northeurope.cloudapp.azure.com/api/auth/login",t=document.querySelector("#login_form"),r={username:t.querySelector("input[name=username]").value,password:t.querySelector("input[name=password]").value},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};c(o,s).then(e=>{console.log(e),console.log(e.token),localStorage.setItem("token",e.token),e.token===void 0?alert("Username or password is incorrect"):(alert(e.message),location.href="app.html",localStorage.setItem("name",e.user.username)),l("loginResponse",`Localstorage set with token value: ${e.token}`)})});const m=document.querySelector("#meRequest");m.addEventListener("click",async()=>{console.log("Testataan TOKENIA ja haetaan käyttäjän tiedot");const n="https://hyte-server-suvta.northeurope.cloudapp.azure.com/api/auth/me",o=localStorage.getItem("token");console.log("Tämä on haettu localstoragesta",o);const t={method:"GET",headers:{Authorization:"Bearer: "+o}};c(n,t).then(r=>{console.log(r),l("meResponse",`Authorized user info: ${JSON.stringify(r)}`)})});const p=document.querySelector("#clearButton");p.addEventListener("click",d);function l(n,o){document.getElementById(n).innerText=o}function d(){localStorage.removeItem("token"),l("clearResponse","localStorage cleared!")}
